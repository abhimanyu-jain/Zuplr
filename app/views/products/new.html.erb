<style>
	#new_product_title {
		margin-bottom: 50px;
	}
</style>

<script>
	$(document).ready(function() {
		$("#product_variants__purchase_date").datepicker();
	});

	function add_variant() {
		var variant_fields = $(".variant_fields").last().clone();
		variant_fields.children().find('input,select').each(function() {
			$(this).val('');
		});
		variant_fields.appendTo(".new_variants_list");
	}

	function remove_variant(element) {
		$(element).parents('.variant_fields').remove();
	}
</script>

<div class="products_body">
	<h1 id="new_product_title">Add New Product</h1>
	<%= form_for :product, url: products_path do |f| %>
	<div class="row">
		<div class="col-md-2">
			<p>
				<%= f.label :title %>
				<br>
				<%= f.text_field :title %>
			</p>
		</div>
		<div class="col-md-2">

			<p>
				<%= f.label :description %>
				<br>
				<%= f.text_area :description %>
			</p>
		</div>
		<div class="col-md-1">
			<p>
				<%= f.label :category %>
				<br>
				<%= f.collection_select(:product_category_id, ProductCategory.all, :id, :name) %>
			</p>
		</div>
		<div class="col-md-1">

			<p>
				<%= f.label :fabric %>
				<br>
				<%= f.collection_select(:fabric_id, Fabric.all, :id, :name) %>
			</p>
		</div>
		<div class="col-md-2">

			<p>
				<%= f.label :pattern %>
				<br>
				<%= f.text_field :pattern %>
			</p>
		</div>
		<div class="col-md-2">
			<p>
				<%= f.label :vendor %>
				<br>
				<%= f.collection_select(:vendor_id, Vendor.all, :id, :name) %>
			</p>
		</div>
		<div class="col-md-2">

			<p>
				<%= f.label :brand %>
				<br>
				<%= f.collection_select(:brand_id, Brand.all, :id, :name) %>
			</p>
		</div>
	</div>

	<table class="table">
		<thead>
			<tr>
				<th><%= f.label :size, "Size" %></th>
				<th><%= f.label :color, "Color" %></th>
				<th><%= f.label :item_status, "Item Status" %></th>
				<th><%= f.label :cost_price, "Cost Price" %></th>
				<th><%= f.label :purchase_date, "Purchase Date" %></th>
			</tr>
		</thead>

		<tbody class="new_variants_list">
			<%= f.fields_for "variants[]", Variant.new do |builder| %>
			<tr class="variant_fields">
				<td><%= builder.collection_select(:size_id, Size.all, :id, :value) %></td>
				<td><%= builder.text_field :color %></td>
				<td><%= builder.collection_select(:item_status_id, ItemStatus.all, :id, :name) %></td>
				<td><%= builder.text_field :cost_price %></td>
				<td><%= builder.text_field :purchase_date %></td>
				<td><%= builder.hidden_field :_destroy %></td>
				<td><%= builder.button('remove', type: 'button', name: "remove", :onclick => "remove_variant(this)") %></td>
			</tr>
			<% end %>
		</tbody>
	</table>
	<%= f.button('add another variant', type: 'button', name: "add", :onclick => "add_variant()") %>
	<br /><br />
	<p>
		<%= f.submit %>
	</p>
</div>
<% end %>
